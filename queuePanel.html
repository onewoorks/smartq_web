<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title>List Of Pre-Registration</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"  />
        <script src="assets/javascript/jquery-1.11.1.min.js" ></script>
        <script src='assets/javascript/common.js'></script>
    </head>
    <body>
        <div class='container'>
            <h1>Organisation : </h1>

            <div class='panel panel-default'>
                <div class='panel-body'>

                    <ul id='waitingList' class='nav nav-tabs'>
                        <li class='tabstatus active'><a href='#allReservation'>All Reservation</a></li>
                        <li><a href='#online'>Online Booking</a></li>    
                        <li><a href='#walkin'>Walk In Booking</a></li>
                        <li><a href='#failed'>Failed To Arrive</a></li>
                    </ul>

                    <br>

                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="allReservation">
                            <table id='listAllReservation' class='table'>
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th class='text-center'>Type</th>
                                        <th>Register Queue</th>
                                        <th>Customer Name</th>
                                        <th>Status</th>
                                        <th class='text-center'>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="online">
                            <table id='listOnlineReservation' class='table'>
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th class='text-center'>Type</th>
                                        <th>Register Queue</th>
                                        <th>Customer Name</th>
                                        <th>Status</th>
                                        <th class='text-center'>Action</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="walkin">walkin</div>
                        <div role="tabpanel" class="tab-pane" id="failed">action</div>
                    </div>


                </div>
            </div>

        </div>
        <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
        <script>

            $(function () {
                var $org_id = getUrlVars()['id'];

                $('#waitingList a').click(function (e) {
                    e.preventDefault()
                    $(this).tab('show')
                })

                $.ajax({
                    url: 'https://onewoorks-solutions.com/smartq/queue.json?id=' + $org_id,
                    success: function (data) {
                        var table = '';
                        $(data).each(function (i, v) {
                            table += '<tr>';
                            table += '<td>' + (i + 1) + '</td>';
                            table += '<td class="text-center"><i class="glyphicon glyphicon-phone"></i>'+v.register_type+'</td>';
                            table += '<td>' + v.timestamp + '</td>';
                            table += '<td>' + v.name.toUpperCase() + '</td>';
                            table += '<td>' + v.status + '</td>';
                            table += '<td class="text-center">';
                            table += '<div class="btn-group">';
                            table += '<div class="btn btn-default">View</div>';
                            table += '<div class="btn btn-default">Paging</div>';
                            table += '<div class="btn btn-default">Cancel</div>';
                            table += '</div>';
                            table += '</td>';
                            table += '</tr>';
                        });
                        $("table#listAllReservation tbody").html(table);
                        $("table#listOnlineReservation tbody").html(table);
                    }
                });
            });
        </script>
    </body>

</html>
