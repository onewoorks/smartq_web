<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="favicon.ico">
        <title>SmartQ : Organisation Info</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"  />
        <script src="assets/javascript/jquery-1.11.1.min.js" ></script>
    </head>
    <body>
        <div class="container">
            <br>
            <div class="panel panel-default">
                <div class='panel-header'>Organisation Info</div>
                    <table class="table ">
                        <tr>
                            <th>Nama Klinik</th>
                            <td><span id='clinicname'></span></td>
                        </tr>
                        <tr>
                            <th>Alamat</th>
                            <td><span id='clinicalamat'></span></td>
                        </tr>
                        <tr>
                            <th>Daerah</th>
                            <td><span id='clinicdaerah'></span></td>
                        </tr>
                        <tr>
                            <th>No Negeri</th>
                            <td><span id='clinicnegeri'></span></td>
                        </tr>
                        <tr>
                            <th>No Telefon</th>
                            <td><span id='clinicphone'></span></td>
                        </tr>
                        <tr>
                            <th>Queue Number</th>
                            <td><span id='queno'></span></td>
                        </tr>
                    </table>
                <div class='panel-footer text-right'>
                    <a class='btn btn-primary' id='addToQueue'>Add To Queue</a>
                </div>
            </div>
        </div>

        <script>
            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,
                        function (m, key, value) {
                            vars[key] = value;
                        });
                return vars;
            }
            $(function () {
                var $org_id = getUrlVars()["id"];
                $.ajax({
                    url: 'https://onewoorks-solutions.com/smartq/organisation.json?id=' + $org_id,
                    success: function (data) {
                        $(data).each(function (i, v) {
                            $('#clinicname').html(v.name);
                            $('#clinicalamat').html(v.alamat);
                            $('#clinicdaerah').html(v.daerah);
                            $('#clinicnegeri').html(v.negeri);
                            $('#clinicphone').html(v.no_telefon);
                            $('#queno').html(v.queue);
                        });
                    }
                });

                $('#addToQueue').click(function () {
                    window.location = './addToQueue.html?id=' + $org_id;
                });
            });
        </script>
    </body>
</html>
